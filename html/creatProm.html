<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="renderer" content="webkit">
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <title>H+ 后台主题UI框架 - 创建促销活动</title>

    <link rel="shortcut icon" href="../favicon.ico">
    <link href="../css/bootstrap.min.css?v=3.3.5" rel="stylesheet">
    <link href="../css/font-awesome.min.css?v=4.4.0" rel="stylesheet">
    <link href="../css/animate.min.css" rel="stylesheet">
    <link href="../css/style.min.css?v=4.0.0" rel="stylesheet">
    <link href="../plugins/daterangepicker/daterangepicker.css" rel="stylesheet">
    <style>
        .ibox-content{
            border-style: none;
        }
    </style>
</head>

<body class="fixed-sidebar full-height-layout gray-bg" style="overflow:hidden">
    <div id="wrapper">
        <!--左侧导航开始-->
        <nav class="navbar-default navbar-static-side" role="navigation">
            <div class="nav-close"><i class="fa fa-times-circle"></i>
            </div>
            <div class="sidebar-collapse">
                <ul class="nav" id="side-menu">
                    <li class="nav-header">
                        <div class="dropdown profile-element">
                            <span><img alt="image" class="img-circle" src="../img/profile_small.jpg" /></span>
                            <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                                <span class="clear">
                               <span class="block m-t-xs"><strong class="font-bold">Beaut-zihan</strong></span>
                                <span class="text-muted text-xs block">超级管理员<b class="caret"></b></span>
                                </span>
                            </a>
                            <ul class="dropdown-menu animated fadeInRight m-t-xs">
                                <li><a class="J_menuItem" href="form_avatar.html">修改头像</a>
                                </li>
                                <li><a class="J_menuItem" href="profile.html">个人资料</a>
                                </li>
                                <li><a class="J_menuItem" href="contacts.html">联系我们</a>
                                </li>
                                <li><a class="J_menuItem" href="mailbox.html">信箱</a>
                                </li>
                                <li class="divider"></li>
                                <li><a href="login.html">安全退出</a>
                                </li>
                            </ul>
                        </div>
                        <div class="logo-element">H+
                        </div>
                    </li>
                    <li>
                        <a href="#">
                            <i class="fa fa-home"></i>
                            <span class="nav-label">主页</span>
                        </a>
                    </li>
                    <li>
                        <a href="creatProm.html">
                            <i class="fa fa fa-bar-chart-o"></i>
                            <span class="nav-label">创建促销活动</span>
                        </a>
                    </li>
                   

                    <li>
                        <a href="#"><i class="fa fa-envelope"></i> <span class="nav-label">促销活动管理</span></a>
                       
                    </li>
                     <li>
                        <a class="J_menuItem" href="layouts.html"><i class="fa fa-columns"></i> <span class="nav-label">商品管理</span></a>
                    </li>
                    
                    <li>
                        <a href="#"><i class="fa fa-envelope"></i> <span class="nav-label">性能监控</span></a>
                       
                    </li>
                   
                </ul>
            </div>
        </nav>
        <!--左侧导航结束-->
        <!--右侧部分开始-->
        <div id="page-wrapper" class="gray-bg dashbard-1">
            
            <h1>创建促销活动</h1>
            <div class="row J_mainContent" id="content-main">
                <div class="ibox-content">
                    <div class="hr-line-dashed"></div>
                        <form method="get" class="form-horizontal">
                            <div class="form-group">
                                <label class="col-sm-2 control-label">活动名称</label>
                                <div class="col-sm-10">
                                    <input type="text" class="form-control">
                                </div>
                            </div>
                            <div class="hr-line-dashed"></div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label">促销平台
                                </label>

                                <div class="col-sm-10">
                                    <div class="checkbox">
                                        <label>
                                            <input type="checkbox" value="">PC端</label>
                                    </div>
                                    <div class="checkbox">
                                        <label>
                                            <input type="checkbox" value="">M端</label>
                                    </div>
                                    <div class="checkbox">
                                        <label>
                                            <input type="checkbox" value="">手Q</label>
                                    </div>
                                    <div class="checkbox">
                                        <label>
                                            <input type="checkbox" value="">微信</label>
                                    </div>
                                </div>
                            </div>
                            <div class="hr-line-dashed"></div>
                            <div class="form-group ">
                                <label class="col-sm-2 control-label">促销人群</label>
                                <div class="col-sm-10 bs-docs-example">
                                    <select class="span2">
                                      <option>普通用户</option>
                                      <option>铜牌用户及以上</option>
                                      <option>银牌用户及以上</option>
                                      <option>金牌用户及以上</option>
                                      <option>仅PLUS会员</option>
                                    </select>
                                </div>
                            </div>
                            <div class="hr-line-dashed"></div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label">活动时间</label>

                                <div class="col-sm-3">
                                    <input type="text" placeholder="提示信息" class="form-control" id="dateRange">
                                </div>
                            </div>
                            <div class="hr-line-dashed"></div>
                            <div class="form-group ">
                                <label class="col-sm-2 control-label">促销类型</label>
                                <div class="col-sm-10 bs-docs-example">
                                    <select class="span2">
                                      <option>直降促销</option>
                                      <option>满减促销</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group ">
                                <label class="col-sm-2 control-label">促销方式</label>
                                <div class="col-sm-10 bs-docs-example">
                                    <div class="pull-left">满</div>
                                    <div class="col-sm-1">
                                        <input type="text" class="form-control">
                                    </div>
                                    <div class="pull-left">减</div>
                                    <div class="col-sm-1">
                                        <input type="text" class="form-control">
                                    </div>
                                </div>
                                <div class="col-sm-10" id="down">
                                    <div class="pull-left">直降&nbsp</div>
                                    <input type="text" class="col-sm-1" id="downNum">
                                    <div class="pull-left">元</div>
                                </div>
                            </div>
                            <div class="hr-line-dashed"></div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label">商品SKUID</label>
                                <div class="col-sm-10">
                                    <input type="text" class="form-control" placeholder="多个商品SKUID之间用英文逗号隔开">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label">商品SPUID</label>
                                <div class="col-sm-10">
                                    <input type="text" class="form-control" id="spuid" placeholder="多个商品SPUID之间用英文逗号隔开">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label">品牌ID</label>
                                <div class="col-sm-10">
                                    <input type="text" class="form-control" id="brand">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-2">
                                        
                                </div> 
                                <div class="col-sm-2">
                                       <a class="btn btn-primary" href="javascript:void(-1);" onclick="show_modal();">查询商品</a>
                                </div>  
                            </div>
                              
                             <div class="hr-line-dashed"></div>
                             <h1>参加促销的商品</h1>
                            <div class="form-group" id="confirmTable">
                                <div class="col-sm-2"></div>
                                <div class="col-sm-8">
                                    <div class="ibox-content">
                                        <table class="table table-striped table-bordered table-hover dataTables-example">
                                            <thead>
                                                <tr>
                                                    <th>商品skuID</th>
                                                    <th>促销ID</th>
                                                    <th>活动名称</th>
                                                    <th>促销类型</th>
                                                    <th>促销规则</th>
                                                    <th>开始时间</th>
                                                    <th>结束时间</th>
                                                    <th>状态</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr class="gradeX">
                                                    <td>Trident</td>
                                                    <td>Trident</td>
                                                    <td>Internet Explorer 4.0</td>
                                                    <td>Win 95+</td>
                                                    <td class="center">4</td>
                                                    <td class="center">X</td>
                                                    <td class="center">4</td>
                                                    <td class="center">X</td>
                                                </tr>
                                                <tr class="gradeX">
                                                    <td>Trident</td>
                                                    <td>Trident</td>
                                                    <td>Internet Explorer 4.0</td>
                                                    <td>Win 95+</td>
                                                    <td class="center">4</td>
                                                    <td class="center">X</td>
                                                    <td class="center">4</td>
                                                    <td class="center">X</td>
                                                </tr>
                                                <tr class="gradeX">
                                                    <td>Trident</td>
                                                    <td>Trident</td>
                                                    <td>Internet Explorer 4.0</td>
                                                    <td>Win 95+</td>
                                                    <td class="center">4</td>
                                                    <td class="center">X</td>
                                                    <td class="center">4</td>
                                                    <td class="center">X</td>
                                                </tr>
                                                <tr class="gradeX">
                                                    <td>Trident</td>
                                                    <td>Trident</td>
                                                    <td>Internet Explorer 4.0</td>
                                                    <td>Win 95+</td>
                                                    <td class="center">4</td>
                                                    <td class="center">X</td>
                                                    <td class="center">4</td>
                                                    <td class="center">X</td>
                                                </tr>
                                                <tr class="gradeX">
                                                    <td>Trident</td>
                                                    <td>Trident</td>
                                                    <td>Internet Explorer 4.0</td>
                                                    <td>Win 95+</td>
                                                    <td class="center">4</td>
                                                    <td class="center">X</td>
                                                    <td class="center">4</td>
                                                    <td class="center">X</td>
                                                </tr>
                                             </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="hr-line-dashed"></div>
                        </form>
                    </div>




            </div>
          
        </div>
        <!--右侧部分结束-->
    <!-- 模态框（Modal） -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog" style="width:1200px">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                        &times;
                    </button>
                    <h4 class="modal-title" id="myModalLabel">
                        模态框（Modal）标题
                    </h4>
                </div>
                <div class="modal-body" id="modalTable" style="overflow: scroll;height: 500px;padding: 0px;">
                
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success" id="selectAll">全部选中
                    </button>
                    <button type="button" class="btn btn-default" data-dismiss="modal" id="closeModal">关闭
                    </button>
                    <button type="button" class="btn btn-primary" id="id_ad_search">
                        提交更改
                    </button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal -->
    </div>


    </div>

    <script type="text/template" id="itemTable">
            <div class="col-sm-12">
                <div class="ibox-content">
                    <table class="table table-striped table-bordered table-hover dataTables-example">
                        <thead>
                            <tr>
                                <th>是否选中</th>
                                <th>商品SKUID</th>
                                <th>商品名称</th>
                                <th>商品图片</th>
                                <th>京东价</th>
                                <th>该时段促销状态</th>
                            </tr>
                        </thead>
                        <tbody>
                            {{ for(var i = 0; data[i]; i++){ }}
                            <tr class="gradeX">
                                <td>
                                    <input type="checkbox" value="">
                                </td>
                                <td class="skuid">{{data[i].sku}}</td>
                                <td>{{data[i].productDesc}}</td>
                                <td><img src="{{data[i].imgPath}}" style="width:60px;"></td>
                                <td>{{data[i].price}}</td>
                                <td>数据还没</td>
                            </tr>
                            {{ } }}
                         </tbody>
                    </table>
                </div>
            </div>
    </script>
    <script type="text/template" id="beforeSendTable">
            <div class="col-sm-12">
                <div class="ibox-content" style="overflow: scroll;height: 400px;">
                    <table class="table table-striped table-bordered table-hover dataTables-example">
                        <thead>
                            <tr>
                                <th>商品SKUID</th>
                                <th>商品名称</th>
                                <th>商品图片</th>
                                <th>京东价</th>
                                <th>该时段促销状态</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            {{ for(var i = 0; data[i]; i++){ }}
                            <tr class="gradeX">
                                <td class="skuid">{{data[i].sku}}</td>
                                <td>{{data[i].productDesc}}</td>
                                <td><img src="{{data[i].imgPath}}" style="width:60px;"></td>
                                <td>{{data[i].price}}</td>
                                <td>数据还没</td>
                                <td><button class="btn btn-danger delete">删除</button></td>
                            </tr>
                            {{ } }}
                         </tbody>
                    </table>
                </div>
            </div>
    </script>
    <script src="../js/jquery.min.js?v=2.1.4"></script>
    <script src="../js/bootstrap.min.js?v=3.3.5"></script>
    <script src="../js/plugins/metisMenu/jquery.metisMenu.js"></script>
    <script src="../js/plugins/slimscroll/jquery.slimscroll.min.js"></script>
    <script src="../js/plugins/layer/layer.min.js"></script>
    <script src="../js/hplus.min.js?v=4.0.0"></script>
    <script type="text/javascript" src="../js/contabs.min.js"></script>
    <script src="../js/plugins/pace/pace.min.js"></script>
    <script src="../plugins/daterangepicker/moment.min.js"></script>
    <script src="../plugins/daterangepicker/daterangepicker.js"></script>
    <script type="text/javascript" src="../plugins/Tool/Tool.js"></script>
    <script type="text/javascript" src="../js/INTERFACE.js"></script>
</body>

<script>
    function show_modal() {
         $('#myModal').modal('show');

         var spuid =  $('#spuid').val(),
             brand = $('#brand').val();



         $.ajax({
            url: window.INTERFACE + '/product/all',
            data:{
                spu:spuid
            },
            type:'get',
            dataType:'jsonp',
            success:function(data){
                var tableHtml = Tool.render(data,$('#itemTable').html());
                $('#modalTable').html(tableHtml)
            }
         })
    }


    $(function () {
        $('#dateRange').daterangepicker({
            "timePicker": true,
            "timePicker24Hour": true,
            "timePickerSeconds": true,
            "startDate": "2017/07/07",
            "endDate": "2017/07/14",
            "locale": {
                "format": "YYYY/MM/DD HH:mm:ss",
                "separator": "   至   ",
                "monthNames": [
                    "一月",
                    "二月",
                    "三月",
                    "四月",
                    "五月",
                    "六月",
                    "七月",
                    "八月",
                    "九月",
                    "十月",
                    "十一月",
                    "十二月"
                ],
                "daysOfWeek": [
                    "日",
                    "一",
                    "二",
                    "三",
                    "四",
                    "五",
                    "六"
                ],
            }
        }, function(start, end, label) {
          $('#dateRange').attr({
            'data-beginTime:':start.format('YYYY-MM-DD hh:mm:ss'),
            'data-endTime':end.format('YYYY-MM-DD hh:mm:ss')
            });

        });




        $(document).delegate('#id_ad_search','click',function(){
            var sku = $('#modalTable').find('[type="checkbox"]').filter(function(){
                return $(this).is(':checked');
            }).closest('tr').find('.skuid');
            var skuid = [];
            sku.each(function(){
                skuid.push($(this).text())
            })
            skuid = skuid.join(',');
                // 刷新表格
                $.ajax({
                    url: window.INTERFACE + '/product/all',
                    data:{
                        sku:skuid
                    },
                    type:'get',
                    dataType:'jsonp',
                    success:function(data){
                        console.log(data);
                        var tableHtml = Tool.render(data,$('#beforeSendTable').html());
                        $('#confirmTable').html(tableHtml);
                    }
                })

            $('#closeModal').trigger('click');
        })

        $(document).delegate('.delete','click',function(){
            $(this).closest('tr').remove();
        })

        $(document).delegate('#selectAll','click',function(){
            $('#modalTable').find('[type="checkbox"]').each(function(){
                $(this).attr('checked',true);
            });
            return false;
        })


        

    });

</script>
</html>